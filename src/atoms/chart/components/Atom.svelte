<script>
  // Core imports
  import { onMount } from 'svelte'
  import { getJson } from '$lib/helpers/guardian/toolbelt.js';
  // Guardian approved colour palettes
  import { categoricalLight, categoricalDark } from '$lib/helpers/guardian/colours';

  // Add darkmode detection here at some point

  // Example for getting chart data from a store
  //import {getExampleData, exampledata} from '$lib/stores/example.svelte.js';
  
  let width = $state(620);
  let height = 400;

  // Component props
  let { name } = $props()

  // Component lifecycle
  onMount(async() => {
    // Example data fetching (currently disabled)
    // await getExampleData()
    // setInterval(async () => {
    //   await getExampleData()
    // }, 60000)
  })

</script>


<div class="atom" bind:clientWidth={width}>

  <div id="graphicContainer">

    <div id="figureTitle">Chart headline here</div>
    
    <div id="subTitle">Your subtitle here</div>	
    
    <div id="chartKey">
      <div class="keyDiv"><span class="keySquare" style="background-color:{categoricalLight[0]};"></span> <span class="keyText">Thing 1</span></div>
      <div class="keyDiv"><span class="keySquare" style="background-color:{categoricalLight[1]};"></span> <span class="keyText">Thing 2</span></div>
    </div>

    <svg class="chart" {width} {height} >

    <!-- Example SVG content to demonstrate styles only, remove and replace with your chart code -->
    
     <g class="x-axis axis" transform="translate(0,380)"><g class="tick" transform="translate(72.0951488164987,0)"><line y2="6"></line><text y="9" dy="0.71em" text-anchor="middle">2021</text></g><g class="tick" transform="translate(154.21373330208576,0)"><line y2="6"></line><text y="9" dy="0.71em" text-anchor="middle">2022</text></g><g class="tick" transform="translate(236.33231778767282,0)"><line y2="6"></line><text y="9" dy="0.71em" text-anchor="middle">2023</text></g><g class="tick" transform="translate(318.4509022732599,0)"><line y2="6"></line><text y="9" dy="0.71em" text-anchor="middle">2024</text></g><g class="tick" transform="translate(400.79446918209516,0)"><line y2="6"></line><text y="9" dy="0.71em" text-anchor="middle">2025</text></g><g class="tick" transform="translate(482.9130536676822,0)"><line y2="6"></line><text y="9" dy="0.71em" text-anchor="middle">2026</text></g><g class="tick" transform="translate(565.0316381532692,0)"><line y2="6"></line><text y="9" dy="0.71em" text-anchor="middle">2027</text></g><g class="tick" transform="translate(647.1502226388563,0)"><line y2="6"></line><text y="9" dy="0.71em" text-anchor="middle">2028</text></g><g class="tick" transform="translate(729.4937895476916,0)"><line y2="6"></line><text y="9" dy="0.71em" text-anchor="middle">2029</text></g></g><g class="y-axis axis" transform="translate(0,0)"><g class="tick" transform="translate(0,360.5722872330715)"><line class="grid-line" x2="770"></line><text x="0" dy="-4px">100</text></g><g class="tick" transform="translate(0,258.3211674071326)"><line class="grid-line" x2="770"></line><text x="0" dy="-4px">110</text></g><g class="tick" transform="translate(0,156.07004758119362)"><line class="grid-line" x2="770"></line><text x="0" dy="-4px">120</text></g><g class="tick" transform="translate(0,53.8189277552547)"><line class="grid-line" x2="770"></line><text x="0" dy="-4px">130</text></g></g><!----><rect fill="#949494" style="opacity: 0.2" x="420.81790485118347" y="0" width="354.18209514881653" height="370"></rect><text class="annotation" x="425.81790485118347" y="20">Projection</text><g class="crossover-annotation"><path stroke="#000" stroke-width="1" fill="none" d="M 770 10 A 50 60 0 0 1 750 70"></path><text text-anchor="end" class="annotation-date" font-size="12" font-weight="bold" x="760" y="85">Jun 2029</text></g><!----><g class="line-group"><path class="outline" role="graphics-symbol" d="M10,360.572C10,360.572,27.051,379.744,30.483,380C33.915,380.256,47.732,365.685,51.181,363.64C54.63,361.595,68.459,356.653,71.87,355.46C75.282,354.267,88.724,350.518,92.119,349.325C95.513,348.132,109.17,342.508,112.601,341.145C116.033,339.781,129.851,334.754,133.3,332.964C136.749,331.175,150.577,322.739,153.989,319.672C157.4,316.604,170.843,299.648,174.237,296.154C177.631,292.661,191.288,280.987,194.72,277.749C198.152,274.511,211.969,260.792,215.418,257.299C218.867,253.805,232.696,238.893,236.107,235.826C239.519,232.758,252.961,222.618,256.356,220.488C259.75,218.358,273.407,212.223,276.839,210.263C280.27,208.303,294.088,198.675,297.537,196.97C300.986,195.266,314.796,191.347,318.226,189.813C321.656,188.279,335.286,180.525,338.699,178.565C342.112,176.605,355.75,167.573,359.182,166.295C362.614,165.017,376.432,163.739,379.88,163.228C383.329,162.716,397.158,161.353,400.569,160.16C403.981,158.967,417.424,150.493,420.818,148.912C424.212,147.332,437.869,142.489,441.301,141.199C444.732,139.909,458.55,134.735,461.999,133.437C465.448,132.139,479.277,126.933,482.688,125.627C486.1,124.321,499.542,119.082,502.936,117.768C506.331,116.454,519.988,111.182,523.419,109.86C526.851,108.537,540.669,103.232,544.118,101.902C547.567,100.571,561.395,95.233,564.807,93.894C568.218,92.556,581.661,87.184,585.055,85.837C588.449,84.49,602.106,79.085,605.538,77.729C608.97,76.374,622.787,70.935,626.236,69.571C629.685,68.207,643.495,62.734,646.925,61.361C650.355,59.989,663.986,54.482,667.399,53.101C670.812,51.719,684.45,46.178,687.881,44.788C691.313,43.398,705.131,37.822,708.58,36.424C712.029,35.025,725.857,29.414,729.269,28.007C732.68,26.6,746.123,20.954,749.517,19.538C752.911,18.122,770,11.016,770,11.016" style="stroke-dasharray: 867.394; stroke-dashoffset: 0;"></path><path class="line" role="graphics-symbol" d="M10,360.572C10,360.572,27.051,379.744,30.483,380C33.915,380.256,47.732,365.685,51.181,363.64C54.63,361.595,68.459,356.653,71.87,355.46C75.282,354.267,88.724,350.518,92.119,349.325C95.513,348.132,109.17,342.508,112.601,341.145C116.033,339.781,129.851,334.754,133.3,332.964C136.749,331.175,150.577,322.739,153.989,319.672C157.4,316.604,170.843,299.648,174.237,296.154C177.631,292.661,191.288,280.987,194.72,277.749C198.152,274.511,211.969,260.792,215.418,257.299C218.867,253.805,232.696,238.893,236.107,235.826C239.519,232.758,252.961,222.618,256.356,220.488C259.75,218.358,273.407,212.223,276.839,210.263C280.27,208.303,294.088,198.675,297.537,196.97C300.986,195.266,314.796,191.347,318.226,189.813C321.656,188.279,335.286,180.525,338.699,178.565C342.112,176.605,355.75,167.573,359.182,166.295C362.614,165.017,376.432,163.739,379.88,163.228C383.329,162.716,397.158,161.353,400.569,160.16C403.981,158.967,417.424,150.493,420.818,148.912C424.212,147.332,437.869,142.489,441.301,141.199C444.732,139.909,458.55,134.735,461.999,133.437C465.448,132.139,479.277,126.933,482.688,125.627C486.1,124.321,499.542,119.082,502.936,117.768C506.331,116.454,519.988,111.182,523.419,109.86C526.851,108.537,540.669,103.232,544.118,101.902C547.567,100.571,561.395,95.233,564.807,93.894C568.218,92.556,581.661,87.184,585.055,85.837C588.449,84.49,602.106,79.085,605.538,77.729C608.97,76.374,622.787,70.935,626.236,69.571C629.685,68.207,643.495,62.734,646.925,61.361C650.355,59.989,663.986,54.482,667.399,53.101C670.812,51.719,684.45,46.178,687.881,44.788C691.313,43.398,705.131,37.822,708.58,36.424C712.029,35.025,725.857,29.414,729.269,28.007C732.68,26.6,746.123,20.954,749.517,19.538C752.911,18.122,770,11.016,770,11.016" stroke="#0094DA" style="stroke-dasharray: 867.394; stroke-dashoffset: 0;"></path><path class="outline" role="graphics-symbol" d="M10,360.572C10,360.572,27.051,358.783,30.483,358.527C33.915,358.272,47.732,358.016,51.181,357.505C54.63,356.993,68.459,353.415,71.87,352.392C75.282,351.37,88.724,346.257,92.119,345.235C95.513,344.212,109.17,340.974,112.601,340.122C116.033,339.27,129.851,336.032,133.3,335.01C136.749,333.987,150.577,329.045,153.989,327.852C157.4,326.659,170.843,322.058,174.237,320.694C177.631,319.331,191.288,313.026,194.72,311.492C198.152,309.958,211.969,303.823,215.418,302.289C218.867,300.755,232.696,294.791,236.107,293.087C239.519,291.382,252.961,283.543,256.356,281.839C259.75,280.135,273.407,274.596,276.839,272.636C280.27,270.677,294.088,260.451,297.537,258.321C300.986,256.191,314.796,248.778,318.226,247.074C321.656,245.369,335.286,239.49,338.699,237.871C342.112,236.252,355.75,229.265,359.182,227.646C362.614,226.027,376.432,219.892,379.88,218.443C383.329,216.995,397.158,211.882,400.569,210.263C403.981,208.644,417.424,200.816,420.818,199.016C424.212,197.215,437.869,190.389,441.301,188.655C444.732,186.921,458.55,179.953,461.999,178.204C465.448,176.454,479.277,169.426,482.688,167.661C486.1,165.896,499.542,158.806,502.936,157.026C506.331,155.246,519.988,148.094,523.419,146.298C526.851,144.502,540.669,137.288,544.118,135.476C547.567,133.665,561.395,126.387,564.807,124.56C568.218,122.732,581.661,115.391,585.055,113.548C588.449,111.704,602.106,104.299,605.538,102.439C608.97,100.58,622.787,93.109,626.236,91.233C629.685,89.358,643.495,81.822,646.925,79.93C650.355,78.038,663.986,70.436,667.399,68.527C670.812,66.618,684.45,58.95,687.881,57.025C691.313,55.099,705.131,47.364,708.58,45.422C712.029,43.479,725.857,35.677,729.269,33.717C732.68,31.758,746.123,23.887,749.517,21.91C752.911,19.934,770,10,770,10" style="stroke-dasharray: 842.544; stroke-dashoffset: 0;"></path><path class="line" role="graphics-symbol" d="M10,360.572C10,360.572,27.051,358.783,30.483,358.527C33.915,358.272,47.732,358.016,51.181,357.505C54.63,356.993,68.459,353.415,71.87,352.392C75.282,351.37,88.724,346.257,92.119,345.235C95.513,344.212,109.17,340.974,112.601,340.122C116.033,339.27,129.851,336.032,133.3,335.01C136.749,333.987,150.577,329.045,153.989,327.852C157.4,326.659,170.843,322.058,174.237,320.694C177.631,319.331,191.288,313.026,194.72,311.492C198.152,309.958,211.969,303.823,215.418,302.289C218.867,300.755,232.696,294.791,236.107,293.087C239.519,291.382,252.961,283.543,256.356,281.839C259.75,280.135,273.407,274.596,276.839,272.636C280.27,270.677,294.088,260.451,297.537,258.321C300.986,256.191,314.796,248.778,318.226,247.074C321.656,245.369,335.286,239.49,338.699,237.871C342.112,236.252,355.75,229.265,359.182,227.646C362.614,226.027,376.432,219.892,379.88,218.443C383.329,216.995,397.158,211.882,400.569,210.263C403.981,208.644,417.424,200.816,420.818,199.016C424.212,197.215,437.869,190.389,441.301,188.655C444.732,186.921,458.55,179.953,461.999,178.204C465.448,176.454,479.277,169.426,482.688,167.661C486.1,165.896,499.542,158.806,502.936,157.026C506.331,155.246,519.988,148.094,523.419,146.298C526.851,144.502,540.669,137.288,544.118,135.476C547.567,133.665,561.395,126.387,564.807,124.56C568.218,122.732,581.661,115.391,585.055,113.548C588.449,111.704,602.106,104.299,605.538,102.439C608.97,100.58,622.787,93.109,626.236,91.233C629.685,89.358,643.495,81.822,646.925,79.93C650.355,78.038,663.986,70.436,667.399,68.527C670.812,66.618,684.45,58.95,687.881,57.025C691.313,55.099,705.131,47.364,708.58,45.422C712.029,43.479,725.857,35.677,729.269,33.717C732.68,31.758,746.123,23.887,749.517,21.91C752.911,19.934,770,10,770,10" stroke="#C70000" style="stroke-dasharray: 842.544; stroke-dashoffset: 0;"></path></g>

     <!-- End of example -->

    </svg>

    <div id="footer">Guardian graphic. Source: source goes here </div>	
  
  </div>

</div>

<style lang="scss">

  .atom {
    width:100%;
    position: relative;
    
  }
</style>
